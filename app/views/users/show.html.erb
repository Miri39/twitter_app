<% if flash[:success] %>
<br/>
  <div class="alert alert-success" role="alert">
        <%= flash[:success] %>
    </div>
<% end %>

<br/>

<div class="row">
  <div class="col-md-5">

    <% if @user.nil? %>
        Nu exista userul cerut.
    <% else %>
        <%= render @user %>
         <% if current_user?(@user) %>
          <div class="p-2">
            <%= render partial: 'shared/error_messages', locals: { obj: @post } %>
            <%= form_with model: @post do |f| %>
              <%= f.label :title %>
              <%= f.text_field :title, class: 'form-control', placeholder: 'Insert title...' %>
              <%= f.label :description %>
              <%= f.text_field :description, class: 'form-control', placeholder: 'Insert content...' %>
              <%= f.submit 'Post', class: 'btn btn-primary mt-2' %>
            <% end %>
          </div>
        <% end %>
    <% end %>
  </div>

<% if @user.present? %>
    <div class= "col-md-6">
      <h3>Posts (<%= @posts.count %>)</h3>
      <%= render @posts%>
      <%= will_paginate(@posts, :renderer =>  WillPaginate::ActionView::BootstrapLinkRenderer, class: "pagination bg-transparent") %>
    </div>
  <% end %>
</div>
<div>
  <%= link_to 'Back to users', '/users', class: "btn btn-secondary"%>
</div>
